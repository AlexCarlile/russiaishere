{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Modal,Button,Input}from'antd';import axios from'axios';import Cookies from'js-cookie';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const TeamModal=_ref=>{let{campaignId,user,onClose,isCreateTeam}=_ref;// const [isCreateTeam, setIsCreateTeam] = useState(true);\nconst[teamName,setTeamName]=useState('');const[teamCode,setTeamCode]=useState('');const navigate=useNavigate();const handleCreateTeam=async()=>{if(!user)return;try{const token=Cookies.get('token');const response=await axios.post('http://127.0.0.1:5000/createTeam',{name:teamName,campaignId,userId:user.email},{headers:{'Authorization':\"Bearer \".concat(token)}});if(response.status===201){alert('Команда создана успешно');navigate(\"/projects/\".concat(response.data.teamId));// Переход к проекту с teamId\n}else{alert('Ошибка создания команды');}onClose();}catch(error){console.error('Ошибка создания команды:',error);alert('Ошибка создания команды');}};const handleJoinTeam=async()=>{if(!user||!teamCode)return;try{const token=Cookies.get('token');const response=await axios.post('http://127.0.0.1:5000/joinTeam',{userId:user.email,campaignId,teamCode// Передаем код команды\n},{headers:{'Authorization':\"Bearer \".concat(token)}});if(response.status===200){alert('Вы присоединились к команде успешно');navigate(\"/projects/\".concat(response.data.teamId));// Переход к проекту с teamId\n}else{alert('Ошибка присоединения к команде');}onClose();}catch(error){console.error('Ошибка присоединения к команде:',error);alert('Ошибка присоединения к команде');}};useEffect(()=>{console.log('Устанавливаем name:',campaignId);console.log('Устанавливаем name:',teamName);console.log('Устанавливаем name:',user===null||user===void 0?void 0:user.email);},[teamName]);return/*#__PURE__*/_jsx(Modal,{title:isCreateTeam?\"Создать команду\":\"Присоединиться к команде\",open:true,onCancel:onClose,footer:null,children:isCreateTeam?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Input,{placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u043E\\u043C\\u0430\\u043D\\u0434\\u044B\",value:teamName,onChange:e=>setTeamName(e.target.value)}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleCreateTeam,style:{marginTop:'1rem'},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0443\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Input,{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u0434 \\u043A\\u043E\\u043C\\u0430\\u043D\\u0434\\u044B\",value:teamCode,onChange:e=>setTeamCode(e.target.value)}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleJoinTeam,style:{marginTop:'1rem'},children:\"\\u041F\\u0440\\u0438\\u0441\\u043E\\u0435\\u0434\\u0438\\u043D\\u0438\\u0442\\u044C\\u0441\\u044F \\u043A \\u043A\\u043E\\u043C\\u0430\\u043D\\u0434\\u0435\"})]})]}):null});};","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Modal","Button","Input","axios","Cookies","jsx","_jsx","jsxs","_jsxs","TeamModal","_ref","campaignId","user","onClose","isCreateTeam","teamName","setTeamName","teamCode","setTeamCode","navigate","handleCreateTeam","token","get","response","post","name","userId","email","headers","concat","status","alert","data","teamId","error","console","handleJoinTeam","log","title","open","onCancel","footer","children","placeholder","value","onChange","e","target","type","onClick","style","marginTop"],"sources":["/Users/alexselyukov/Documents/napp/portal/src/pages/ActionsPage/ActionContent/CreateTeam/TeamModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Modal, Button, Input } from 'antd';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { User } from '../CampaignList';\n\ninterface TeamModalProps {\n    campaignId: number;\n    user: any;\n    onClose: () => void;\n    isCreateTeam: boolean;\n}\n\nexport const TeamModal: React.FC<TeamModalProps> = ({ campaignId, user, onClose, isCreateTeam }) => {\n    // const [isCreateTeam, setIsCreateTeam] = useState(true);\n    const [teamName, setTeamName] = useState('');\n    const [teamCode, setTeamCode] = useState('');\n\n    const navigate = useNavigate();\n\n    const handleCreateTeam = async () => {\n        if (!user) return;\n\n        try {\n            const token = Cookies.get('token');\n            const response = await axios.post('http://127.0.0.1:5000/createTeam', {\n                name: teamName,\n                campaignId,\n                userId: user.email\n            }, {\n                headers: {\n                    'Authorization': `Bearer ${token}`\n                }\n            });\n            if (response.status === 201) {\n                alert('Команда создана успешно');\n                navigate(`/projects/${response.data.teamId}`); // Переход к проекту с teamId\n            } else {\n                alert('Ошибка создания команды');\n            }\n            onClose();\n        } catch (error) {\n            console.error('Ошибка создания команды:', error);\n            alert('Ошибка создания команды');\n        }\n    };\n\n    const handleJoinTeam = async () => {\n        if (!user || !teamCode) return;\n\n        try {\n            const token = Cookies.get('token');\n            const response = await axios.post('http://127.0.0.1:5000/joinTeam', {\n                userId: user.email,\n                campaignId,\n                teamCode // Передаем код команды\n            }, {\n                headers: {\n                    'Authorization': `Bearer ${token}`\n                }\n            });\n            if (response.status === 200) {\n                alert('Вы присоединились к команде успешно');\n                navigate(`/projects/${response.data.teamId}`); // Переход к проекту с teamId\n            } else {\n                alert('Ошибка присоединения к команде');\n            }\n            onClose();\n        } catch (error) {\n            console.error('Ошибка присоединения к команде:', error);\n            alert('Ошибка присоединения к команде');\n        }\n    };\n\n    useEffect(() => {\n        console.log('Устанавливаем name:', campaignId);\n        console.log('Устанавливаем name:', teamName);\n        console.log('Устанавливаем name:', user?.email);\n\n    }, [teamName]);\n\n    return (\n        <Modal\n            title={isCreateTeam ? \"Создать команду\" : \"Присоединиться к команде\"}\n            open\n            onCancel={onClose}\n            footer={null}\n        >\n            {isCreateTeam ? (\n                <div>\n                    <Input\n                        placeholder=\"Название команды\"\n                        value={teamName}\n                        onChange={(e) => setTeamName(e.target.value)}\n                    />\n                    <Button type=\"primary\" onClick={handleCreateTeam} style={{ marginTop: '1rem' }}>\n                        Создать команду\n                    </Button>\n\n                    <div>\n                        <Input\n                            placeholder=\"Введите код команды\"\n                            value={teamCode}\n                            onChange={(e) => setTeamCode(e.target.value)}\n                        />\n                        <Button type=\"primary\" onClick={handleJoinTeam} style={{ marginTop: '1rem' }}>\n                            Присоединиться к команде\n                        </Button>\n                    </div>\n                </div>\n            ) : null}\n        </Modal>\n    );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}