{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Form,Input,Button,Avatar,Upload,message,Spin}from'antd';import{UserOutlined,UploadOutlined}from'@ant-design/icons';import Cookies from'js-cookie';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Info=()=>{const[form]=Form.useForm();const[loading,setLoading]=useState(true);useEffect(()=>{const token=Cookies.get('token');axios.get('http://127.0.0.1:5000/user',{headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>{form.setFieldsValue(response.data);setLoading(false);}).catch(error=>{message.error('Ошибка при загрузке данных пользователя');// Использование message из antd\nsetLoading(false);});},[form]);const handleFinish=values=>{const token=Cookies.get('token');axios.put('http://127.0.0.1:5000/user',values,{headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>{message.success('Данные успешно обновлены');// Использование message из antd\n}).catch(error=>{message.error('Ошибка при обновлении данных пользователя');// Использование message из antd\n});};if(loading){return/*#__PURE__*/_jsx(Spin,{});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'24px',display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',marginBottom:'24px'},children:[/*#__PURE__*/_jsx(Avatar,{size:64,icon:/*#__PURE__*/_jsx(UserOutlined,{})}),/*#__PURE__*/_jsx(Upload,{children:/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(UploadOutlined,{}),children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\"})})]}),/*#__PURE__*/_jsxs(Form,{form:form,layout:\"vertical\",onFinish:handleFinish,initialValues:{},style:{display:'flex'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Form.Item,{name:\"email\",label:\"Email\",rules:[{required:true,message:'Пожалуйста, введите ваш email'}],children:/*#__PURE__*/_jsx(Input,{disabled:true})}),/*#__PURE__*/_jsx(Form.Item,{name:\"name\",label:\"\\u0418\\u043C\\u044F\",rules:[{required:true,message:'Пожалуйста, введите ваше имя'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{name:\"surname\",label:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",rules:[{required:true,message:'Пожалуйста, введите вашу фамилию'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{name:\"region\",label:\"\\u0420\\u0435\\u0433\\u0438\\u043E\\u043D\",rules:[{required:true,message:'Пожалуйста, введите ваш регион'}],children:/*#__PURE__*/_jsx(Input,{})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Form.Item,{name:\"locality\",label:\"\\u041D\\u0430\\u0441\\u0435\\u043B\\u0435\\u043D\\u043D\\u044B\\u0439 \\u043F\\u0443\\u043D\\u043A\\u0442\",rules:[{required:true,message:'Пожалуйста, введите ваш населенный пункт'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{name:\"school\",label:\"\\u0428\\u043A\\u043E\\u043B\\u0430\",rules:[{required:true,message:'Пожалуйста, введите вашу школу'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{name:\"role\",label:\"\\u0420\\u043E\\u043B\\u044C\",rules:[{required:true,message:'Пожалуйста, введите вашу роль'}],children:/*#__PURE__*/_jsx(Input,{disabled:true})})]}),/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",loading:loading,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F\"})]})]})]});};","map":{"version":3,"names":["React","useEffect","useState","Form","Input","Button","Avatar","Upload","message","Spin","UserOutlined","UploadOutlined","Cookies","axios","jsx","_jsx","jsxs","_jsxs","Info","form","useForm","loading","setLoading","token","get","headers","Authorization","concat","then","response","setFieldsValue","data","catch","error","handleFinish","values","put","success","children","style","padding","display","justifyContent","flexDirection","alignItems","marginBottom","size","icon","layout","onFinish","initialValues","Item","name","label","rules","required","disabled","type","htmlType"],"sources":["/Users/alexselyukov/Documents/napp/portal/src/pages/Personal/PersonalAreaContent/Info/Info.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Form, Input, Button, Avatar, Upload, message, Spin } from 'antd';\nimport { UserOutlined, UploadOutlined } from '@ant-design/icons';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\n\nexport const Info = () => {\n    const [form] = Form.useForm();\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const token = Cookies.get('token');\n\n        axios.get('http://127.0.0.1:5000/user', {\n            headers: {\n                Authorization: `Bearer ${token}`\n            }\n        }).then(response => {\n            form.setFieldsValue(response.data);\n            setLoading(false);\n        }).catch(error => {\n            message.error('Ошибка при загрузке данных пользователя'); // Использование message из antd\n            setLoading(false);\n        });\n    }, [form]);\n\n    const handleFinish = (values: any) => {\n        const token = Cookies.get('token');\n\n        axios.put('http://127.0.0.1:5000/user', values, {\n            headers: {\n                Authorization: `Bearer ${token}`\n            }\n        }).then(response => {\n            message.success('Данные успешно обновлены'); // Использование message из antd\n        }).catch(error => {\n            message.error('Ошибка при обновлении данных пользователя'); // Использование message из antd\n        });\n    };\n\n    if (loading) {\n        return <Spin />;\n    }\n\n    return (\n        <div>\n            <h2>Личный кабинет</h2>\n                <div style={{ padding: '24px', display: 'flex', justifyContent: 'space-between' }}>\n                    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginBottom: '24px' }}>\n                        <Avatar size={64} icon={<UserOutlined />} />\n                        <Upload>\n                            <Button icon={<UploadOutlined />}>Загрузить фото</Button>\n                        </Upload>\n                    </div>\n                    <Form\n                        form={form}\n                        layout=\"vertical\"\n                        onFinish={handleFinish}\n                        initialValues={{}}\n                        style={{display: 'flex'}}\n                    >\n                        <div>\n                            <Form.Item\n                                name=\"email\"\n                                label=\"Email\"\n                                rules={[{ required: true, message: 'Пожалуйста, введите ваш email' }]}\n                            >\n                                <Input disabled />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"name\"\n                                label=\"Имя\"\n                                rules={[{ required: true, message: 'Пожалуйста, введите ваше имя' }]}\n                            >\n                                <Input />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"surname\"\n                                label=\"Фамилия\"\n                                rules={[{ required: true, message: 'Пожалуйста, введите вашу фамилию' }]}\n                            >\n                                <Input />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"region\"\n                                label=\"Регион\"\n                                rules={[{ required: true, message: 'Пожалуйста, введите ваш регион' }]}\n                            >\n                                <Input />\n                            </Form.Item>\n                        </div>\n                        \n                        <div>\n                            <Form.Item\n                                name=\"locality\"\n                                label=\"Населенный пункт\"\n                                rules={[{ required: true, message: 'Пожалуйста, введите ваш населенный пункт' }]}\n                            >\n                                <Input />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"school\"\n                                label=\"Школа\"\n                                rules={[{ required: true, message: 'Пожалуйста, введите вашу школу' }]}\n                            >\n                                <Input />\n                            </Form.Item>\n                            <Form.Item\n                                name=\"role\"\n                                label=\"Роль\"\n                                rules={[{ required: true, message: 'Пожалуйста, введите вашу роль' }]}\n                            >\n                                <Input disabled/>\n                            </Form.Item>\n                        </div>\n                        <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\n                            Сохранить изменения\n                        </Button>\n                    </Form>\n                </div>\n        </div>\n        \n    );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}