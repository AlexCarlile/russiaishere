{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../../../store';import axios from'axios';import{LockOutlined,UserOutlined}from'@ant-design/icons';import{Button,Form,Input}from'antd';import Cookies from'js-cookie';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const AuthorizationForm=()=>{const[message,setMessage]=useState(Boolean);const{authorized,toggleAuthorized}=useAuth();const navigate=useNavigate();const onFinish=async values=>{const{email,password}=values;try{const response=await axios.post('http://127.0.0.1:5000/login',{email,password});// Сохраняем токен в куки на 10 минут\nCookies.set('token',response.data.access_token,{expires:24*60*60});// 24 часа\nsetMessage(true);toggleAuthorized(true);console.log('Вы авторизованы');navigate('/protected');}catch(error){setMessage(false);toggleAuthorized(false);}};return/*#__PURE__*/_jsxs(Form,{name:\"normal_login\",className:\"login-form\",initialValues:{remember:true},onFinish:onFinish,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"email\",rules:[{required:true,message:'Please input your Username!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"E-mail\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",rules:[{required:true,message:'Please input your Password!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(LockOutlined,{className:\"site-form-item-icon\"}),type:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(\"a\",{className:\"login-form-forgot\",href:\"\",children:\"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C?\"})}),/*#__PURE__*/_jsxs(Form.Item,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\",style:{width:\"100%\"},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),\"\\u0418\\u043B\\u0438 \",/*#__PURE__*/_jsx(\"a\",{href:\"\",children:\"\\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C \\u0441\\u0435\\u0439\\u0447\\u0430\\u0441!\"})]})]});};","map":{"version":3,"names":["React","useState","useNavigate","useAuth","axios","LockOutlined","UserOutlined","Button","Form","Input","Cookies","jsx","_jsx","jsxs","_jsxs","AuthorizationForm","message","setMessage","Boolean","authorized","toggleAuthorized","navigate","onFinish","values","email","password","response","post","set","data","access_token","expires","console","log","error","name","className","initialValues","remember","children","Item","rules","required","prefix","placeholder","type","href","htmlType","style","width"],"sources":["/Users/alexselyukov/Documents/napp/portal/src/pages/AuthorizationPage/Authorization/AuthorizationForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from '../../../store';\nimport axios from 'axios';\nimport { LockOutlined, UserOutlined } from '@ant-design/icons';\nimport { Button, Checkbox, Form, Input } from 'antd';\nimport Cookies from 'js-cookie';\n\nexport const AuthorizationForm: React.FC = () => {\n    const [message, setMessage] = useState(Boolean);\n    const { authorized, toggleAuthorized } = useAuth();\n    const navigate = useNavigate();\n    \n    const onFinish = async (values: any) => {\n        const { email, password } = values;\n\n        try {\n            const response = await axios.post('http://127.0.0.1:5000/login', {\n                email,\n                password,\n            });\n\n            // Сохраняем токен в куки на 10 минут\n            Cookies.set('token', response.data.access_token, { expires: 24 * 60 * 60 }); // 24 часа\n            setMessage(true);\n            toggleAuthorized(true);\n\n            console.log('Вы авторизованы')\n            navigate('/protected')\n        } catch (error) {\n            setMessage(false);\n            toggleAuthorized(false);\n        }\n    };\n  \n    return (\n        <Form\n            name=\"normal_login\"\n            className=\"login-form\"\n            initialValues={{ remember: true }}\n            onFinish={onFinish}\n        >\n        <Form.Item\n            name=\"email\"\n            rules={[{ required: true, message: 'Please input your Username!' }]}\n        >\n            <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"E-mail\" />\n        </Form.Item>\n        <Form.Item\n            name=\"password\"\n            rules={[{ required: true, message: 'Please input your Password!' }]}\n        >\n            <Input\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\n            type=\"password\"\n            placeholder=\"Пароль\"\n            />\n        </Form.Item>\n\n        <Form.Item>\n            <a className=\"login-form-forgot\" href=\"\">\n                Забыли пароль?\n            </a>\n        </Form.Item>\n\n        <Form.Item>\n            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" style={{width: \"100%\"}}>\n                Войти\n            </Button>\n            Или <a href=\"\">зарегистрируйтесь сейчас!</a>\n        </Form.Item>\n        </Form>\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}